From e0938ea8c876580bd1f5642b080a96fbdb4bba0d Mon Sep 17 00:00:00 2001
From: bcoll <bcoll@cloudflare.com>
Date: Thu, 26 Jan 2023 15:30:34 +0000
Subject: [PATCH 10/14] Hide unsupported settings UI

- Show CORS errors in console setting
- Show XHR requests in console setting
- Disable JavaScript setting
- Devices settings tab
- Throttling settings tab
---
 front_end/panels/console/ConsoleView.ts      | 4 ----
 front_end/panels/settings/SettingsScreen.ts  | 4 ++++
 front_end/panels/settings/settingsScreen.css | 5 +++++
 3 files changed, 9 insertions(+), 4 deletions(-)

diff --git a/front_end/panels/console/ConsoleView.ts b/front_end/panels/console/ConsoleView.ts
index 3ae38d9fcd..80bbaf3ce1 100644
--- a/front_end/panels/console/ConsoleView.ts
+++ b/front_end/panels/console/ConsoleView.ts
@@ -460,14 +460,10 @@ export class ConsoleView extends UI.Widget.VBox implements
         i18nString(UIStrings.onlyShowMessagesFromTheCurrentContext), i18nString(UIStrings.selectedContextOnly));
     ConsoleView.appendSettingsCheckboxToToolbar(
         settingsToolbarLeft, this.groupSimilarSetting, i18nString(UIStrings.groupSimilarMessagesInConsole));
-    ConsoleView.appendSettingsCheckboxToToolbar(
-        settingsToolbarLeft, this.showCorsErrorsSetting, i18nString(UIStrings.showCorsErrorsInConsole));
 
     const settingsToolbarRight = new UI.Toolbar.Toolbar('', settingsPane.element);
     settingsToolbarRight.makeVertical();
 
-    ConsoleView.appendSettingsCheckboxToToolbar(
-        settingsToolbarRight, monitoringXHREnabledSetting, i18nString(UIStrings.logXMLHttpRequests));
     ConsoleView.appendSettingsCheckboxToToolbar(
         settingsToolbarRight, 'console-eager-eval', i18nString(UIStrings.eagerlyEvaluateTextInThePrompt));
     ConsoleView.appendSettingsCheckboxToToolbar(
diff --git a/front_end/panels/settings/SettingsScreen.ts b/front_end/panels/settings/SettingsScreen.ts
index f0c1693232..7d7eea90e0 100644
--- a/front_end/panels/settings/SettingsScreen.ts
+++ b/front_end/panels/settings/SettingsScreen.ts
@@ -377,6 +377,10 @@ export class GenericSettingsTab extends SettingsTab {
     const uiSectionName = Common.Settings.getLocalizedSettingsCategory(category);
     const sectionElement = this.appendSection(uiSectionName);
     for (const settingRegistration of settings) {
+      const name = settingRegistration.settingName;
+      if (name === "monitoringXHREnabled" || name === "consoleShowsCorsErrors" || name === "javaScriptDisabled") {
+        continue;
+      }
       const setting = Common.Settings.Settings.instance().moduleSetting(settingRegistration.settingName);
       const settingControl = UI.SettingsUI.createControlForSetting(setting);
       if (settingControl) {
diff --git a/front_end/panels/settings/settingsScreen.css b/front_end/panels/settings/settingsScreen.css
index 37a79572c0..96dde853c7 100644
--- a/front_end/panels/settings/settingsScreen.css
+++ b/front_end/panels/settings/settingsScreen.css
@@ -243,3 +243,8 @@ label {
     color: HighlightText;
   }
 }
+
+#tab-devices,
+#tab-throttling-conditions {
+  display: none;
+}
-- 
2.39.5 (Apple Git-154)

